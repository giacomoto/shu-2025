<div class="main-app-container">
  <!-- Page Title Header -->
  <header class="page-title-header">
    <div class="page-title-content">
      <h1 class="page-title">{{ getPageTitle() }}</h1>
      <p class="page-subtitle">{{ getPageSubtitle() }}</p>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Roadmap Tab -->
    <div class="tab-content" *ngIf="currentTab === 'roadmap'">
      <div class="itinerary-container">
        <div class="day-section"
          *ngFor="let day of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]; trackBy: trackByDay">
          <div class="day-events" *ngIf="getEventsByDay(day).length > 0">
            <div class="day-header">
              <h3 class="day-title">Day {{ day }}</h3>
            </div>

            <div class="events-list">
              <div class="event-card" *ngFor="let event of getEventsByDay(day); trackBy: trackByEvent"
                [class]="'event-' + getEventColor(event.type)">
                <div class="event-header">
                  <div class="event-icon">{{ getEventIcon(event.type) }}</div>
                  <div class="event-info">
                    <h4 class="event-title">{{ event.title }}</h4>
                    <p class="event-description">{{ event.description }}</p>
                  </div>
                </div>

                <div class="event-details">
                  <div class="event-meta">
                    <span class="event-time" *ngIf="event.time">{{ event.time }}</span>
                    <span class="event-duration" *ngIf="event.duration">{{ event.duration }}</span>
                    <span class="event-price" *ngIf="event.price">{{ event.price }}</span>
                  </div>
                  <div class="event-location">
                    <span class="location-icon">üìç</span>
                    <span class="location-text">{{ event.location }}</span>
                  </div>
                  <div class="event-category">
                    <span class="category-badge">{{ event.category }}</span>
                  </div>
                  <div class="event-accessibility" *ngIf="event.accessibility && event.accessibility.length > 0">
                    <div class="accessibility-icons">
                      <span class="accessibility-icon" 
                            *ngFor="let acc of event.accessibility" 
                            [title]="getAccessibilityLabel(acc)">
                        {{ getAccessibilityIcon(acc) }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Map Tab -->
    <div class="tab-content" *ngIf="currentTab === 'map'">
      <app-map-graph></app-map-graph>
    </div>

    <!-- Favorites Tab -->
    <div class="tab-content" *ngIf="currentTab === 'favorites'">
      <div class="favorites-placeholder">
        <div class="favorites-icon">‚ù§Ô∏è</div>
        <h3>Your Favorites</h3>
        <p>Save the places that interest you most</p>
      </div>
    </div>

    <!-- Chatbot Tab -->
    <div class="tab-content" *ngIf="currentTab === 'chatbot'">
      <div class="chatbot-container">
        <!-- Chat Messages -->
        <div class="chat-messages">
          <!-- Welcome Message -->
          <div class="message bot-message">
            <div class="message-avatar">ü§ñ</div>
            <div class="message-content">
              <div class="message-bubble bot-bubble">
                <p>Hello! I'm Olivia, your virtual assistant for Spello. I'm here to help you with information about local attractions, restaurants, events, and more. How can I assist you today?</p>
              </div>
              <div class="message-time">Just now</div>
            </div>
          </div>

          <!-- Sample User Message -->
          <div class="message user-message">
            <div class="message-content">
              <div class="message-bubble user-bubble">
                <p>What are the best restaurants in Spello?</p>
              </div>
              <div class="message-time">Just now</div>
            </div>
            <div class="message-avatar">üë§</div>
          </div>

          <!-- Sample Bot Response -->
          <div class="message bot-message">
            <div class="message-avatar">ü§ñ</div>
            <div class="message-content">
              <div class="message-bubble bot-bubble">
                <p>Great question! Here are some of the best restaurants in Spello:</p>
                <ul>
                  <li><strong>Ristorante Il Tempio</strong> - Traditional Umbrian cuisine with panoramic views</li>
                  <li><strong>Ristorante La Bastiglia</strong> - Refined cuisine in a historic setting</li>
                  <li><strong>Bar Centrale</strong> - Perfect for typical Italian breakfast</li>
                </ul>
                <p>All of these are included in your itinerary. Would you like more details about any of them?</p>
              </div>
              <div class="message-time">Just now</div>
            </div>
          </div>

          <!-- Another User Message -->
          <div class="message user-message">
            <div class="message-content">
              <div class="message-bubble user-bubble">
                <p>Tell me more about the Infiorata Festival</p>
              </div>
              <div class="message-time">Just now</div>
            </div>
            <div class="message-avatar">üë§</div>
          </div>

          <!-- Another Bot Response -->
          <div class="message bot-message">
            <div class="message-avatar">ü§ñ</div>
            <div class="message-content">
              <div class="message-bubble bot-bubble">
                <p>The Infiorata Festival is one of Spello's most famous events! üå∏</p>
                <p>It takes place during Corpus Christi (usually in May or June) and features stunning flower carpets created by local artists along the streets. The entire town participates in creating these beautiful, intricate designs using flower petals.</p>
                <p>I notice you have an Infiorata Workshop scheduled for Day 2 of your itinerary - you'll get to learn this traditional art form from local masters!</p>
              </div>
              <div class="message-time">Just now</div>
            </div>
          </div>
        </div>

        <!-- Chat Input -->
        <div class="chat-input-container">
          <div class="chat-input-wrapper">
            <input type="text" 
                   class="chat-input" 
                   placeholder="Ask me anything about Spello..."
                   #chatInput>
            <button class="send-button" (click)="sendMessage(chatInput.value); chatInput.value = ''">
              <span class="send-icon">üì§</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Tab -->
    <div class="tab-content" *ngIf="currentTab === 'profile'">
      <div class="profile-section">
        <div class="profile-info">
          <div class="info-item">
            <span class="info-label">User type:</span>
            <span class="info-value">{{ userData.userType === 'citizen' ? 'Spello Citizen' : 'Tourist' }}</span>
          </div>

          <div class="info-item">
            <span class="info-label">Stay duration:</span>
            <span class="info-value">{{ userData.stayDuration }} {{ userData.stayDuration === 1 ? 'day' : 'days'
              }}</span>
          </div>

          <div class="info-item">
            <span class="info-label">Goals:</span>
            <div class="goals-list">
              <span class="goal-tag" *ngFor="let goal of userData.goals">{{ goal }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Bottom Tab Navigation -->
  <nav class="bottom-tab-navigation">
    <button class="tab-button" [class.active]="currentTab === 'roadmap'" (click)="setTab('roadmap')">
      <span class="tab-icon">üó∫Ô∏è</span>
      <span class="tab-label">Itinerary</span>
    </button>
    <button class="tab-button" [class.active]="currentTab === 'map'" (click)="setTab('map')">
      <span class="tab-icon">üìç</span>
      <span class="tab-label">Map</span>
    </button>
    <button class="tab-button" [class.active]="currentTab === 'chatbot'" (click)="setTab('chatbot')">
      <span class="tab-icon">ü§ñ</span>
      <span class="tab-label">Chatbot</span>
    </button>
    <button class="tab-button" [class.active]="currentTab === 'profile'" (click)="setTab('profile')">
      <span class="tab-icon">üë§</span>
      <span class="tab-label">Profile</span>
    </button>
  </nav>
</div>